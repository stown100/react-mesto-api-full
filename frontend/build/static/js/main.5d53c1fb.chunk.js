(this["webpackJsonpmesto-react"]=this["webpackJsonpmesto-react"]||[]).push([[0],{19:function(e,t,n){},39:function(e,t,n){"use strict";n.r(t);var a=n(1),c=n.n(a),r=n(21),s=n.n(r),o=(n(19),n(10)),i=n(9),l=n.n(i),u=n(12),p=n(26),j=n(2),m=n.p+"static/media/logo.bbe2a6ea.svg",d=n(0);var b=function(e){var t=e.children;return Object(d.jsxs)("header",{className:"header",children:[Object(d.jsx)("img",{className:"header__logo",src:m,alt:"\u041b\u043e\u0433\u043e\u0442\u0438\u043f"}),t]})},h=c.a.createContext(),f=n.p+"static/media/EditButton.af236f6c.svg",O=n.p+"static/media/Vector.bed8c136.svg",_=n.p+"static/media/delete.2af49b82.svg",g=n.p+"static/media/Group.1ad06e85.svg",v=function(e){var t=e.link,n=e.name,a=e.likes,r=e.onCardClick,s=e.onCardLike,o=e.onCardDelete,i=e.owner,l=e.cardId,u=(e.onDeletePopup,c.a.useContext(h)),p=i===u._id,j="".concat(p?"element__delete":"element__delete_hidden"),m=a.some((function(e){return e===u._id})),b="".concat(m?"element__group_active":"element__group");return Object(d.jsxs)("article",{className:"element",children:[Object(d.jsx)("button",{type:"button",className:j,onClick:function(){return o(l)},children:Object(d.jsx)("img",{src:_,className:"element__img-delete",alt:"\u0423\u0434\u0430\u043b\u0438\u0442\u044c"})}),Object(d.jsx)("img",{src:t,className:"element__img",alt:"\u041a\u0430\u0440\u0442\u0438\u043d\u043a\u0430",onClick:function(){return r(t,n)}}),Object(d.jsxs)("div",{className:"element__block",children:[Object(d.jsx)("h2",{className:"element__title",children:n}),Object(d.jsxs)("button",{type:"button",className:"element__like-btn",children:[Object(d.jsx)("img",{src:g,className:b,onClick:function(){return s(a,l)},alt:"\u041b\u0430\u0439\u043a"}),Object(d.jsx)("p",{className:"element__like_number",children:a.length})]})]})]})},x=function(){return Object(d.jsx)("div",{className:"spin-wrapper",children:Object(d.jsx)("div",{className:"spinner"})})};var N=function(e){var t=e.setAvatarPopupOpen,n=e.setProfilePopupOpen,a=e.setNewCardPopupOpen,r=e.onCardClick,s=e.cardsInfo,o=e.onCardLike,i=e.onCardDelete,l=e.onDeletePopup,u=c.a.useContext(h);return Object(d.jsxs)("main",{className:"main",children:[Object(d.jsxs)("section",{className:"profile",children:[Object(d.jsxs)("div",{className:"profile__block",children:[Object(d.jsxs)("div",{className:"profile__redact-image",onClick:function(){return t(!0)},children:[Object(d.jsx)("img",{src:u.avatar,className:"profile__jack",alt:"\u0410\u0432\u0430\u0442\u0430\u0440"}),Object(d.jsx)("span",{className:"profile__redact-img"})]}),Object(d.jsxs)("div",{className:"profile__info",children:[Object(d.jsxs)("div",{className:"profile__title-button",children:[Object(d.jsx)("h1",{className:"profile__title",children:u.name}),Object(d.jsx)("button",{type:"button",className:"profile__edit-button",onClick:function(){return n(!0)},children:Object(d.jsx)("img",{className:"profile__edit",src:f,alt:"\u0420\u0435\u0434\u0430\u043a\u0442\u0438\u0440\u043e\u0432\u0430\u0442\u044c"})})]}),Object(d.jsx)("p",{className:"profile__subtitle",children:u.about})]})]}),Object(d.jsx)("button",{type:"button",className:"profile__vector-button",onClick:function(){return a(!0)},children:Object(d.jsx)("img",{src:O,className:"profile__vector",alt:"\u041f\u043b\u044e\u0441"})})]}),Object(d.jsx)("section",{className:"elements",children:s?s.map((function(e){var t=e.link,n=e.name,a=e.likes,c=e._id,s=e.owner;return Object(d.jsx)(v,{link:t,name:n,likes:a,onCardClick:r,onCardDelete:i,owner:s,onCardLike:o,cardId:c,onDeletePopup:l},c)})):Object(d.jsx)("h3",{children:Object(d.jsx)(x,{})})})]})};var C=function(){return Object(d.jsx)("footer",{className:"footer",children:Object(d.jsxs)("p",{className:"footer__img",children:["\xa9 ",(new Date).getFullYear()," Mesto Russia"]})})},k=n.p+"static/media/CloseIcon.dac22d3e.svg";var y=function(e){var t=e.link,n=e.name,a=e.closeAllPopups,c=e.isOpen;return Object(d.jsx)("div",{className:"popup popup_img  ".concat(c&&"popup_opened"),children:Object(d.jsxs)("div",{className:"popup__container popup__container_img",children:[Object(d.jsx)("button",{type:"button",className:"popup__close popup__close_img",onClick:a,children:Object(d.jsx)("img",{src:k,alt:"\u041a\u0440\u0435\u0441\u0442\u0438\u043a"})}),Object(d.jsx)("img",{src:t,className:"popup__img",alt:"\u0444\u043e\u0442\u043e"}),Object(d.jsx)("h2",{className:"popup__title",children:n})]})})},S=n(22),P=n(23),w=new(function(){function e(t){var n=t.url,a=t.headers;Object(S.a)(this,e),this._handleResponse=function(e){return e.ok?e.json():Promise.reject("\u041e\u0448\u0438\u0431\u043a\u0430: ".concat(e.status))},this.url=n,this.headers=a}return Object(P.a)(e,[{key:"getInitialCards",value:function(e){return fetch("".concat(this.url,"/cards"),{method:"GET",headers:{authorization:"Bearer ".concat(e),"Content-Type":"application/json"}}).then(this._handleResponse)}},{key:"addTask",value:function(e,t){return fetch("".concat(this.url,"/cards"),{method:"POST",headers:{authorization:"Bearer ".concat(t),"Content-Type":"application/json"},body:JSON.stringify(e)}).then(this._handleResponse)}},{key:"deleteTask",value:function(e,t){return fetch("".concat(this.url,"/cards/").concat(e),{method:"DELETE",headers:{authorization:"Bearer ".concat(t),"Content-Type":"application/json"}}).then(this._handleResponse)}},{key:"getUserInfo",value:function(e){return fetch("".concat(this.url,"/users/me"),{headers:{authorization:"Bearer ".concat(e),"Content-Type":"application/json"}}).then(this._handleResponse)}},{key:"setUserInfo",value:function(e,t){var n=e.name,a=e.about;return fetch("".concat(this.url,"/users/me"),{method:"PATCH",headers:{authorization:"Bearer ".concat(t),"Content-Type":"application/json"},body:JSON.stringify({name:n,about:a})}).then(this._handleResponse)}},{key:"setUserAvatar",value:function(e,t){return fetch("".concat(this.url,"/users/me/avatar"),{method:"PATCH",headers:{authorization:"Bearer ".concat(t),"Content-Type":"application/json"},body:JSON.stringify(e)}).then(this._handleResponse)}},{key:"likeCard",value:function(e,t,n){return fetch("".concat(this.url,"/cards/likes/").concat(e),{method:t?"DELETE":"PUT",headers:{authorization:"Bearer ".concat(n),"Content-Type":"application/json"}}).then(this._handleResponse)}}]),e}())({url:"https://api.application-mesto.nomoredomains.xyz"});var E=function(e){var t=e.children,n=e.name,a=e.title,c=e.isOpen,r=e.onClose,s=e.button,o=e.onSubmit;return Object(d.jsx)("div",{className:"popup  ".concat(c&&"popup_opened"," popup_").concat(n),children:Object(d.jsxs)("div",{className:"popup__container popup__container_profile",children:[Object(d.jsx)("button",{type:"button",className:"popup__close popup__close_".concat(n),onClick:r,children:Object(d.jsx)("img",{src:k,alt:"\u041a\u0440\u0435\u0441\u0442\u0438\u043a"})}),Object(d.jsxs)("form",{onSubmit:o,className:"form",action:"#",name:"".concat(n),children:[Object(d.jsx)("h3",{className:"form__title",children:a}),t,Object(d.jsx)("button",{type:"submit",className:"form__button",children:s})]})]})})},I=function(e){var t=e.profilePopupOpen,n=(e.setProfilePopupOpen,e.onUpdateUser),a=e.closeAllPopups,r=c.a.useContext(h),s=c.a.useState(""),o=Object(j.a)(s,2),i=o[0],l=o[1],u=c.a.useState(""),p=Object(j.a)(u,2),m=p[0],b=p[1];return c.a.useEffect((function(){l(r.name),b(r.about)}),[r,t]),Object(d.jsxs)(E,{isOpen:t,onClose:a,onSubmit:function(e){e.preventDefault(),n({name:i,about:m})},name:"profile",title:"\u0420\u0435\u0434\u0430\u043a\u0442\u0438\u0440\u043e\u0432\u0430\u0442\u044c \u043f\u0440\u043e\u0444\u0438\u043b\u044c",button:"\u0421\u043e\u0445\u0440\u0430\u043d\u0438\u0442\u044c",children:[Object(d.jsx)("input",{type:"text",id:"name",className:"form__input form__input_type_name",name:"name",placeholder:"\u0418\u043c\u044f",minLength:"2",maxLength:"30",value:i,onChange:function(e){l(e.target.value)}}),Object(d.jsx)("span",{id:"name-error",className:"form__input-error"}),Object(d.jsx)("input",{type:"text",id:"role",className:"form__input form__input_type_role",name:"about",placeholder:"\u041f\u0440\u043e\u0444\u0435\u0441\u0441\u0438\u044f",minLength:"2",maxLength:"30",value:m,onChange:function(e){b(e.target.value)}}),Object(d.jsx)("span",{id:"role-error",className:"form__input-error"})]})},T=function(e){var t=e.avatarPopupOpen,n=e.onUpdateAvatar,a=e.closeAllPopups,r=c.a.useContext(h),s=c.a.useRef();return c.a.useEffect((function(){s.current.value=r.avatar}),[r]),Object(d.jsxs)(E,{isOpen:t,onClose:a,onSubmit:function(e){e.preventDefault(),n({avatar:s.current.value})},name:"avatar",title:"\u041e\u0431\u043d\u043e\u0432\u0438\u0442\u044c \u0430\u0432\u0430\u0442\u0430\u0440",button:"\u0421\u043e\u0445\u0440\u0430\u043d\u0438\u0442\u044c",children:[Object(d.jsx)("input",{type:"url",id:"avatar",className:"form__input form__input_type_avatar",name:"avatar",placeholder:"\u0441\u0441\u044b\u043b\u043a\u0430 \u043d\u0430 \u0430\u0432\u0430\u0442\u0430\u0440",ref:s,required:!0}),Object(d.jsx)("span",{id:"avatar-error",className:"form__input-error"})]})},A=function(e){var t=e.newCardPopupOpen,n=e.closeAllPopups,a=e.handleAddPlaceSubmit,r=c.a.useState(""),s=Object(j.a)(r,2),o=s[0],i=s[1],l=c.a.useState(""),u=Object(j.a)(l,2),p=u[0],m=u[1];return Object(d.jsxs)(E,{isOpen:t,onClose:n,onSubmit:function(e){e.preventDefault(),a({name:o,link:p})},name:"images",title:"\u041d\u043e\u0432\u043e\u0435 \u043c\u0435\u0441\u0442\u043e",button:"\u0421\u043e\u0445\u0440\u0430\u043d\u0438\u0442\u044c",children:[Object(d.jsx)("input",{type:"text",id:"name-card",className:"form__input form__input_type_title",placeholder:"\u041d\u0430\u0437\u0432\u0430\u043d\u0438\u0435",onChange:function(e){i(e.target.value)},name:"title",minLength:"2",maxLength:"30",value:o,required:!0}),Object(d.jsx)("span",{id:"name-card-error",className:"form__input-error"}),Object(d.jsx)("input",{type:"url",id:"link",className:"form__input form__input_type_link",placeholder:"\u0441\u0441\u044b\u043b\u043a\u0430 \u043d\u0430 \u043a\u0430\u0440\u0442\u0438\u043d\u043a\u0443",onChange:function(e){m(e.target.value)},name:"link",value:p,required:!0}),Object(d.jsx)("span",{id:"link-error",className:"form__input-error"})]})},D=n(3),L=n(8),R=function(e){var t=e.children;return Object(d.jsx)("div",{className:"navbar",children:t})},U=function(e){var t=e.onRegister,n=(e.setRegisterPopupOpen,e.setEnterPopupOpen),c=Object(a.useState)(""),r=Object(j.a)(c,2),s=r[0],o=r[1],i=Object(a.useState)(""),p=Object(j.a)(i,2),m=p[0],h=p[1],f=Object(D.g)(),O=function(){var e=Object(u.a)(l.a.mark((function e(a){return l.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:a.preventDefault(),t({email:s,password:m}).then((function(){return o(""),void h("")})).then((function(){return f.push("/sign-in")})).catch((function(){return n(!0)}));case 2:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}();return Object(a.useEffect)((function(){localStorage.getItem("jwt")&&f.push("/")}),[]),Object(d.jsxs)(D.b,{children:[Object(d.jsx)(b,{children:Object(d.jsx)(R,{children:Object(d.jsx)(L.b,{to:"sign-in",className:"navbar__link",children:"\u0412\u043e\u0439\u0442\u0438"})})}),Object(d.jsxs)("div",{className:"register",children:[Object(d.jsxs)("form",{className:"register__form",onSubmit:O,children:[Object(d.jsx)("h2",{className:"register__form_title",children:"\u0420\u0435\u0433\u0438\u0441\u0442\u0440\u0430\u0446\u0438\u044f"}),Object(d.jsx)("input",{type:"email",className:"register__form_input",placeholder:"Email",value:s,onChange:function(e){return o(e.target.value)}}),Object(d.jsx)("input",{type:"password",className:"register__form_input",placeholder:"\u041f\u0430\u0440\u043e\u043b\u044c",value:m,onChange:function(e){return h(e.target.value)}}),Object(d.jsx)("button",{className:"register__form_button",children:"\u0417\u0430\u0440\u0435\u0433\u0438\u0441\u0442\u0440\u0438\u0440\u043e\u0432\u0430\u0442\u044c\u0441\u044f"})]}),Object(d.jsx)("button",{className:"register__button",children:Object(d.jsx)(L.b,{to:"sign-in",className:"register__button_link",children:"\u0412\u044b \u0443\u0436\u0435 \u0437\u0430\u0440\u0435\u0433\u0438\u0441\u0442\u0440\u0438\u0440\u043e\u0432\u0430\u043d\u043d\u044b? \u0412\u043e\u0439\u0442\u0438"})})]})]})},B=function(e){var t=e.onLogin,n=e.setEnterPopupOpen,c=Object(a.useState)(""),r=Object(j.a)(c,2),s=r[0],o=r[1],i=Object(a.useState)(""),p=Object(j.a)(i,2),m=p[0],h=p[1],f=Object(D.g)(),O=function(){var e=Object(u.a)(l.a.mark((function e(a){return l.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:a.preventDefault(),t({email:s,password:m}).then((function(){return o(""),void h("")})).then((function(){return f.push("/")})).catch((function(){return n(!0)}));case 2:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}();return Object(a.useEffect)((function(){localStorage.getItem("jwt")&&f.push("/")}),[]),Object(d.jsxs)(D.b,{children:[Object(d.jsx)(b,{children:Object(d.jsx)(L.b,{to:"sign-up",className:"navbar__link",children:"\u0417\u0430\u0440\u0435\u0433\u0438\u0441\u0442\u0440\u0438\u0440\u043e\u0432\u0430\u0442\u044c\u0441\u044f"})}),Object(d.jsx)("div",{className:"register",children:Object(d.jsxs)("form",{className:"register__form",onSubmit:O,children:[Object(d.jsx)("h2",{className:"register__form_title",children:"\u0412\u0445\u043e\u0434"}),Object(d.jsx)("input",{type:"email",className:"register__form_input",placeholder:"Email",value:s,onChange:function(e){return o(e.target.value)}}),Object(d.jsx)("input",{type:"password",className:"register__form_input",placeholder:"\u041f\u0430\u0440\u043e\u043b\u044c",value:m,onChange:function(e){return h(e.target.value)}}),Object(d.jsx)("button",{className:"register__form_button",children:"\u0412\u043e\u0439\u0442\u0438"})]})})]})},z=n(27),J=["component"],F=function(e){var t=e.component,n=Object(z.a)(e,J);return Object(d.jsx)(D.b,Object(o.a)(Object(o.a)({},n),{},{render:function(e){return n.loggedIn?Object(d.jsx)(t,Object(o.a)(Object(o.a)({},e),n)):Object(d.jsx)(D.a,{to:"/sign-in"})}}))},M="https://api.application-mesto.nomoredomains.xyz",q=function(e){return e.ok?e.json():Promise.reject("\u041e\u0448\u0438\u0431\u043a\u0430: ".concat(e.status))},G=n.p+"static/media/check.a9eb6caf.svg",H=function(e){var t=e.name,n=e.onClose,a=e.onSubmit,c=e.children,r=e.isOpen;return Object(d.jsx)("div",{className:"popup  ".concat(r&&"popup_opened"," popup_").concat(t),children:Object(d.jsxs)("div",{className:"popup__container popup__container_profile",children:[Object(d.jsx)("button",{type:"button",className:"popup__close popup__close_".concat(t),onClick:n,children:Object(d.jsx)("img",{src:k,alt:"\u041a\u0440\u0435\u0441\u0442\u0438\u043a"})}),Object(d.jsx)("div",{onSubmit:a,className:"form",children:c})]})})},V=function(e){var t=e.registerPopupOpen,n=e.closeAllPopups;return Object(d.jsxs)(H,{isOpen:t,onClose:n,children:[Object(d.jsx)("img",{src:G,className:"register__popup-img"}),Object(d.jsx)("p",{className:"register__popup-title",children:"\u0412\u044b \u0443\u0441\u043f\u0435\u0448\u043d\u043e \u0437\u0430\u0440\u0435\u0433\u0435\u0441\u0442\u0440\u0438\u0440\u043e\u0432\u0430\u043b\u0438\u0441\u044c!"})]})},Y=n.p+"static/media/ErrPopup.d4ce2a26.svg",K=function(e){var t=e.enterPopupOpen,n=e.closeAllPopups;return Object(d.jsxs)(H,{isOpen:t,onClose:n,children:[Object(d.jsx)("img",{src:Y,className:"register__popup-img"}),Object(d.jsx)("p",{className:"register__popup-title",children:"\u0427\u0442\u043e-\u0442\u043e \u043f\u043e\u0448\u043b\u043e \u043d\u0435 \u0442\u0430\u043a! \u041f\u043e\u043f\u0440\u043e\u0431\u0443\u0439\u0442\u0435 \u0435\u0449\u0451 \u0440\u0430\u0437."})]})},Q=function(e){var t=e.isOpen,n=e.setBurgerMenu,a=e.userData,c=e.onSignOut;return Object(d.jsxs)("div",{className:"navbar__menu",children:[Object(d.jsx)("button",{className:"navbar__button-menu",onClick:function(){return n(!0)},children:Object(d.jsx)("span",{})}),Object(d.jsxs)("ul",{className:"navbar__nav  ".concat(t&&"navbar__nav_open"),children:[Object(d.jsx)("li",{className:"navbar__link",children:a.email}),Object(d.jsx)("li",{children:Object(d.jsx)("button",{onClick:c,className:"navbar__link navbar__button",children:"\u0412\u044b\u0439\u0442\u0438"})})]})]})};var W=function(){var e=c.a.useState(!1),t=Object(j.a)(e,2),n=t[0],a=t[1],r=c.a.useState(!1),s=Object(j.a)(r,2),i=s[0],m=s[1],f=c.a.useState(!1),O=Object(j.a)(f,2),_=O[0],g=O[1],v=c.a.useState(!1),x=Object(j.a)(v,2),k=x[0],S=x[1],P=c.a.useState(!1),E=Object(j.a)(P,2),L=E[0],z=E[1],J=c.a.useState(!1),G=Object(j.a)(J,2),H=G[0],Y=G[1],W=c.a.useState(!1),X=Object(j.a)(W,2),Z=X[0],$=X[1],ee=c.a.useState({}),te=Object(j.a)(ee,2),ne=te[0],ae=te[1],ce=c.a.useState([]),re=Object(j.a)(ce,2),se=re[0],oe=re[1],ie=c.a.useState({name:"",about:"",avatar:""}),le=Object(j.a)(ie,2),ue=le[0],pe=le[1],je=c.a.useState(!1),me=Object(j.a)(je,2),de=me[0],be=me[1],he=c.a.useState({}),fe=Object(j.a)(he,2),Oe=fe[0],_e=fe[1],ge=Object(D.g)(),ve=function(){a(!1),m(!1),g(!1),S(!1),z(!1),$(!1)};c.a.useEffect((function(){var e=localStorage.getItem("jwt");Promise.all([w.getUserInfo(e),w.getInitialCards(e)]).then((function(e){var t=Object(j.a)(e,2),n=t[0],a=t[1];pe(n[0]),oe(a)})).catch((function(){console.error("\u0427\u0442\u043e-\u0442\u043e \u0441\u043b\u043e\u043c\u0430\u043b\u043e\u0441\u044c!")}))}),[de]),c.a.useEffect((function(){var e=function(e){"Escape"===e.key&&ve()};return document.addEventListener("keydown",e),function(){return document.removeEventListener("keydown",e)}}),[]);var xe=function(){var e=Object(u.a)(l.a.mark((function e(t){return l.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",(n=t,fetch("".concat(M,"/users/me"),{method:"GET",headers:{"Content-Type":"application/json",Authorization:"Bearer ".concat(n)}}).then(q).then((function(e){return e}))).then((function(e){e.data&&(be(!0),_e({email:e.data.email}))})).catch((function(){return console.log("400 \u2014 \u0422\u043e\u043a\u0435\u043d \u043d\u0435 \u043f\u0435\u0440\u0435\u0434\u0430\u043d \u0438\u043b\u0438 \u043f\u0435\u0440\u0435\u0434\u0430\u043d \u043d\u0435 \u0432 \u0442\u043e\u043c \u0444\u043e\u0440\u043c\u0430\u0442\u0435")})));case 1:case"end":return e.stop()}var n}),e)})));return function(t){return e.apply(this,arguments)}}();c.a.useEffect((function(){var e=localStorage.getItem("jwt");e&&xe(e)}),[de]),c.a.useEffect((function(){de&&ge.push("/")}),[de]),c.a.useEffect((function(){}),[Oe]);var Ne=function(){localStorage.removeItem("jwt"),be(!1),ge.push("/sign-in")};return Object(d.jsx)(h.Provider,{value:ue,children:Object(d.jsx)("div",{className:"App",children:Object(d.jsxs)("div",{className:"page",children:[Object(d.jsxs)(D.d,{children:[Object(d.jsxs)(F,{exact:!0,loggedIn:de,path:"/",children:[Object(d.jsx)(b,{loggedIn:de,setUserData:_e,onSignOut:Ne,children:Object(d.jsx)(R,{email:function(e){return _e({email:e.email})},onSignOut:Ne,children:Object(d.jsx)(Q,{burgerMenu:H,setBurgerMenu:Y,userData:Oe,onSignOut:Ne,isOpen:H})})}),Object(d.jsx)(N,{setAvatarPopupOpen:a,setProfilePopupOpen:m,setNewCardPopupOpen:g,onCardClick:function(e,t){$(!0),ae({link:e,name:t})},cardsInfo:se,onCardLike:function(e,t){var n=localStorage.getItem("jwt"),a=e.some((function(e){return e===ue._id}));w.likeCard(t,a,n).then((function(e){oe((function(n){return n.map((function(n){return n._id===t?e:n}))}))})).catch((function(){return console.log("\u0427\u0442\u043e-\u0442\u043e \u0441\u043b\u043e\u043c\u0430\u043b\u043e\u0441\u044c!")}))},onCardDelete:function(e){var t=localStorage.getItem("jwt");w.deleteTask(e,t).then((function(){oe((function(t){return t.filter((function(t){return t._id!==e}))}))})).catch((function(){return console.log("\u0427\u0442\u043e-\u0442\u043e \u0441\u043b\u043e\u043c\u0430\u043b\u043e\u0441\u044c!")}))}}),Object(d.jsx)(C,{})]}),Object(d.jsx)(D.b,{path:"/sign-up",children:Object(d.jsx)(U,{onRegister:function(e){return function(e,t){return fetch("".concat(M,"/signup"),{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({password:e,email:t})}).then(q).then((function(e){return e}))}(e.password,e.email).then((function(e){if(!e||400===e.statusCode)throw new Error("\u0427\u0442\u043e-\u0442\u043e \u043f\u043e\u0448\u043b\u043e \u043d\u0435 \u0442\u0430\u043a");return S(!0),e}))},setRegisterPopupOpen:S,setEnterPopupOpen:z})}),Object(d.jsx)(D.b,{path:"/sign-in",children:Object(d.jsx)(B,{onLogin:function(e){return function(e,t){return fetch("".concat(M,"/signin"),{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({password:e,email:t})}).then(q).then((function(e){return e?(localStorage.setItem("jwt",e.jwt),e):void 0}))}(e.password,e.email).then((function(e){if(!e.token)throw new Error("\u041d\u0435\u043f\u0440\u0430\u0432\u0438\u043b\u044c\u043d\u044b\u0435 \u0438\u043c\u044f \u043f\u043e\u043b\u044c\u0437\u043e\u0432\u0430\u0442\u0435\u043b\u044f \u0438\u043b\u0438 \u043f\u0430\u0440\u043e\u043b\u044c");localStorage.setItem("jwt",e.token),be(!0)}))},setEnterPopupOpen:z})})]}),de?Object(d.jsx)(D.a,{to:"/"}):Object(d.jsx)(D.a,{to:"/sign-up"}),Object(d.jsx)(T,{closeAllPopups:ve,avatarPopupOpen:n,onUpdateAvatar:function(e){var t=localStorage.getItem("jwt");w.setUserAvatar(e,t).then((function(e){a(!1),pe(e)})).catch((function(){return console.log("\u0427\u0442\u043e-\u0442\u043e \u0441\u043b\u043e\u043c\u0430\u043b\u043e\u0441\u044c!")}))}}),Object(d.jsx)(I,{closeAllPopups:ve,profilePopupOpen:i,onUpdateUser:function(e){var t=e.name,n=e.about,a=localStorage.getItem("jwt");w.setUserInfo({name:t,about:n},a).then((function(e){m(!1),pe(e)})).catch((function(){return console.log("\u0427\u0442\u043e-\u0442\u043e \u0441\u043b\u043e\u043c\u0430\u043b\u043e\u0441\u044c!")}))}}),Object(d.jsx)(A,{closeAllPopups:ve,newCardPopupOpen:_,handleAddPlaceSubmit:function(e){var t=e.name,n=e.link,a=localStorage.getItem("jwt");w.addTask({name:t,link:n},a).then((function(e){oe([e].concat(Object(p.a)(se))),g(!1)})).catch((function(){return console.log("\u0427\u0442\u043e-\u0442\u043e \u0441\u043b\u043e\u043c\u0430\u043b\u043e\u0441\u044c!")}))},cardsInfo:se}),Object(d.jsx)(V,{closeAllPopups:ve,registerPopupOpen:k}),Object(d.jsx)(K,{closeAllPopups:ve,enterPopupOpen:L}),Object(d.jsx)(y,Object(o.a)(Object(o.a)({},ne),{},{closeAllPopups:ve,isOpen:Z}))]})})})},X=function(e){e&&e instanceof Function&&n.e(3).then(n.bind(null,40)).then((function(t){var n=t.getCLS,a=t.getFID,c=t.getFCP,r=t.getLCP,s=t.getTTFB;n(e),a(e),c(e),r(e),s(e)}))};s.a.render(Object(d.jsx)(c.a.StrictMode,{children:Object(d.jsx)(L.a,{children:Object(d.jsx)(W,{})})}),document.getElementById("root")),X()}},[[39,1,2]]]);
//# sourceMappingURL=main.5d53c1fb.chunk.js.map